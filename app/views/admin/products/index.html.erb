<div class="page-header">
  <h1>Products</h1>
</div>

<div class="row">
  <p class="pull-left"><span class="label label-warning">category</span> <span class="label label-info">showcase</span></p>
  <p class="pull-right">
  <%= link_to new_admin_product_path do %>
    <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Add a product
  <% end %>
  </p>
</div>

<div class="row">
  <% @products.each do |p| %>
    <div class="col-sm-4 col-md-3">
      <div class="thumbnail">
        <p>
          <% p.categories.each do |pc| %>
            <%= link_to admin_category_products_path(pc) do %>
              <span class="label label-warning"><%= pc.name %></span> 
            <% end %> 
          <% end %>
          <% p.showcases.each do |s| %>
            <%= link_to admin_showcase_products_path(s) do %>
              <span class="label label-info"><%= s.title %></span>
            <% end %>
          <% end %>
        </p> 
        <small class="pull-right"><%= p.updated_at.to_formatted_s(:long) %></small>
        <%= link_to admin_product_path(p), target: "_blank" do %>
          <%= image_tag p.image_url %>
        <% end %>
        <div class="caption">
          <h4><%= p.title %></h4>
          <p><%= truncate(p.description, length: 90, omission: '...') %> <em><small>[Created at <%= p.created_at.to_formatted_s(:long) %>]</small></em></p>

          <p> <%= link_to "Delete", admin_product_path(p), class: "btn btn-default btn-sm", method: :delete, data: { confirm: "Are you sure?" } %>
              <%= link_to "Edit", edit_admin_product_path(p), class: "btn btn-primary btn-sm" %>
          </p>
        </div>
      </div>
    </div>
  <% end %>
</div>
